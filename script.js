const translations = {
    'pt-BR': {
        'nav.home': 'Início',
        'nav.about': 'Sobre',
        'nav.portfolio': 'Portfólio',
        'nav.quality': 'Qualidade',
        'nav.contact': 'Contato',
        'hero.title': 'Do Brasil para o mundo!',
        'hero.subtitle': 'A Marques & Mariano Tropicals exporta e distribui frutos tropicais <em>in natura</em> com padrão internacional. Atendemos importadores, distribuidores e redes varejistas com qualidade, rastreabilidade e logística segura do Brasil até o seu mercado.',
        'hero.portfolio': 'Nosso Portfólio',
        'hero.cta': 'Conheça Nossos Produtos',
        'about.title': 'Sobre a Marques & Mariano Tropicals',
        'about.intro': 'Somos uma empresa especializada na exportação de frutos tropicais <em>in natura</em> do Brasil para os principais mercados internacionais, com presença global consolidada. Atendemos grandes distribuidores e redes de supermercados em todos os continentes, utilizando nossa relevante rede de relacionamentos e parceiros comerciais para expansão contínua de negócios.',
        'about.card1.title': 'Qualidade Premium',
        'about.card1.text': 'Trabalhamos com frutos tropicais de padrão internacional, com certificações e rastreabilidade total da produção.',
        'about.card2.title': 'Presença Global',
        'about.card2.text': 'Atendemos mais de 20 países em todos os continentes, com operações 365 dias por ano e rastreabilidade completa.',
        'about.card3.title': 'Experiência',
        'about.card3.text': 'Forte histórico no mercado de exportação com excelência em serviço, confiabilidade e qualidade.',
        'team.title': 'Nossos Especialistas',
        'team.intro': 'Conheça os especialistas que lideram a Marques & Mariano Tropicals em uma parceria de excelência, garantindo qualidade técnica e experiência comercial em cada etapa do processo de exportação de frutos tropicais.',
        'team.pedro.name': 'Pedro Marques',
        'team.pedro.title': 'Engenheiro Agrônomo',
        'team.pedro.description': 'Engenheiro Agrônomo formado pelo Instituto Federal do Triângulo Mineiro, com especialização em exportação de frutas tropicais brasileiras. Possui sólida experiência na aplicação de princípios ESG na agricultura, envolvendo avaliação de conformidade, sustentabilidade produtiva, governança de processos e adequação a normas internacionais. Atua de forma estratégica na estruturação de sistemas agrícolas mais eficientes, rastreáveis e alinhados às exigências do mercado externo.',
        'team.leonardo.name': 'Leonardo Mariano',
        'team.leonardo.title': 'Especialista em Exportação',
        'team.leonardo.description': 'Especialista em exportação de frutas tropicais brasileiras, estruturando operações internacionais com foco em segurança, qualidade e logística eficiente. Possui ampla experiência em negociações comerciais, desenvolvimento de mercados internacionais e gestão de relacionamentos com importadores e distribuidores globais, garantindo o cumprimento de prazos e padrões de qualidade exigidos pelos mercados de destino.',
        'water.title': 'Diferencial dos Frutos: Qualidade Superior',
        'water.intro': 'Frutos tropicais da região com características superiores de qualidade, favorecendo o melhor aproveitamento para consumo e processamento pelo comprador.',
        'water.card1.title': 'Qualidade Premium',
        'water.card1.text': 'Seleção rigorosa dos frutos priorizando qualidade, frescor e características ideais para cada mercado.',
        'water.card2.title': 'Excelente para consumo',
        'water.card2.text': 'Perfil ideal para mercados que valorizam experiência de consumo e qualidade no <em>in natura</em>.',
        'water.card3.title': 'Consistência para B2B',
        'water.card3.text': 'Padronização e critérios comerciais alinhados ao seu mercado e canal de venda.',
        'specs.title': 'Especificações & Fornecimento (sob consulta)',
        'specs.intro': 'Compartilhamos ficha técnica, categorias, embalagens e condições comerciais conforme o seu mercado e destino.',
        'specs.item1.title': 'Seleção e padronização',
        'specs.item1.text': 'Categorias e critérios alinhados à necessidade do cliente e ao canal de venda.',
        'specs.item2.title': 'Embalagem para exportação',
        'specs.item2.text': 'Opções de embalagem e acondicionamento para preservar o fruto durante a logística.',
        'specs.item3.title': 'Janelas de embarque',
        'specs.item3.text': 'Programação, volumes e frequência definidos em conjunto com o cliente.',
        'specs.item4.title': 'Documentação',
        'specs.item4.text': 'Suporte com documentação de exportação conforme o destino e requisitos do mercado.',
        'about.stat1': 'Países Atendidos',
        'about.stat2': 'Rastreabilidade',
        'about.stat3': 'Dias de Produção',
        'fruits.mango': 'Manga',
        'fruits.melon': 'Melão',
        'fruits.lime': 'Limão',
        'fruits.grape': 'Uva',
        'fruits.watermelon': 'Melancia',
        'fruits.banana': 'Banana',
        'fruits.papaya': 'Mamão',
        'fruits.coconut': 'Coco',
        'export.title': 'Serviços de Exportação',
        'export.card1.title': 'Exportação Direta',
        'export.card1.item1': 'Operação com produtores integrados',
        'export.card1.item2': 'Gerenciamento de trâmites logísticos e aduaneiros',
        'export.card1.item3': 'Documentação aduaneira completa',
        'export.card1.item4': 'Inteligência de mercado',
        'export.card1.item5': 'Seleção de parceiros locais',
        'export.card2.title': 'Exportação Back-to-Back',
        'export.card2.item1': 'Ponte entre empresas estrangeiras',
        'export.card2.item2': 'Colaboração global eficiente',
        'export.card2.item3': 'Redução de custos logísticos',
        'export.card2.item4': 'Agilidade nas transações',
        'export.card2.item5': 'Respostas rápidas às demandas',
        'quality.title': 'Qualidade e Certificações',
        'quality.intro': 'Nossos frutos tropicais seguem os mais rigorosos padrões internacionais de qualidade, com certificações reconhecidas globalmente.',
        'quality.item1.title': 'Certificações Internacionais',
        'quality.item1.text': 'Produtos certificados segundo normas internacionais de segurança alimentar.',
        'quality.item2.title': 'Controle de Qualidade',
        'quality.item2.text': 'Rigoroso controle em todas as etapas, da colheita ao embarque.',
        'quality.item3.title': 'Rastreabilidade Total',
        'quality.item3.text': 'Sistema completo de rastreamento desde a origem até o destino final.',
        'contact.title': 'Entre em Contato',
        'contact.intro': 'Interessado em nossos produtos? Entre em contato conosco para mais informações.',
        'contact.form.name': 'Nome',
        'contact.form.email': 'Email',
        'contact.form.company': 'Empresa',
        'contact.form.country': 'País',
        'contact.form.fruits': 'Frutos de Interesse:',
        'contact.form.select_fruits': 'Selecione os frutos',
        'contact.form.fruits_required': 'Por favor, selecione pelo menos uma fruta.',
        'contact.form.message': 'Mensagem',
        'contact.form.submit': 'Enviar Mensagem',
        'floating.quote': 'Solicitar Cotação',
        'footer.text': '© 2026 Marques & Mariano Tropicals. Todos os direitos reservados.'
    },
    'en': {
        'nav.home': 'Home',
        'nav.about': 'About',
        'nav.portfolio': 'Portfolio',
        'nav.quality': 'Quality',
        'nav.contact': 'Contact',
        'hero.title': 'From Brazil to the world!',
        'hero.subtitle': 'Marques & Mariano Tropicals exports and distributes fresh tropical fruits to international standards. We serve importers, distributors, and retail chains with quality, traceability, and reliable logistics from Brazil to your market.',
        'hero.portfolio': 'Our Portfolio',
        'hero.cta': 'Discover Our Products',
        'about.title': 'About Marques & Mariano Tropicals',
        'about.intro': 'We are a company specialized in exporting fresh tropical fruits from Brazil to major international markets, with a consolidated global presence. We serve major distributors and supermarket chains on all continents, using our relevant network of relationships and commercial partners for continuous business expansion.',
        'about.card1.title': 'Premium Quality',
        'about.card1.text': 'We work with international standard tropical fruits, with certifications and full production traceability.',
        'about.card2.title': 'Global Presence',
        'about.card2.text': 'We serve over 20 countries on all continents, with 365-day operations and complete traceability.',
        'about.card3.title': 'Experience',
        'about.card3.text': 'Strong track record in the export market with excellence in service, reliability and quality.',
        'team.title': 'Our Specialists',
        'team.intro': 'Meet the specialists who lead Marques & Mariano Tropicals in a partnership of excellence, ensuring technical quality and commercial experience at every stage of the tropical fruit export process.',
        'team.pedro.name': 'Pedro Marques',
        'team.pedro.title': 'Agricultural Engineer',
        'team.pedro.description': 'Agricultural Engineer graduated from the Federal Institute of Triângulo Mineiro, with a specialization in exporting Brazilian tropical fruits. He has solid experience in applying ESG principles to agriculture, including compliance assessment, productive sustainability, process governance, and alignment with international standards. He works strategically in structuring more efficient, traceable agricultural systems aligned with the demands of the foreign market.',
        'team.leonardo.name': 'Leonardo Mariano',
        'team.leonardo.title': 'Export Specialist',
        'team.leonardo.description': 'Specialist in exporting Brazilian tropical fruits, structuring international operations with a focus on safety, quality and efficient logistics. Has extensive experience in commercial negotiations, international market development and relationship management with global importers and distributors, ensuring compliance with deadlines and quality standards required by destination markets.',
        'water.title': 'Product Differential: Superior Quality',
        'water.intro': 'Tropical fruits from the region are known for superior quality characteristics, improving yield for consumption and buyer-side processing.',
        'water.card1.title': 'Premium Quality',
        'water.card1.text': 'Rigorous fruit selection prioritizing quality, freshness and ideal characteristics for each market.',
        'water.card2.title': 'Excellent for consumption',
        'water.card2.text': 'Ideal profile for markets that value the <em>in natura</em> experience and consistent quality.',
        'water.card3.title': 'Consistency for B2B',
        'water.card3.text': 'Standardization and commercial criteria aligned with your market and sales channel.',
        'specs.title': 'Specifications & Supply (on request)',
        'specs.intro': 'We share technical specs, categories, packaging options, and commercial terms according to your market and destination.',
        'specs.item1.title': 'Selection and standardization',
        'specs.item1.text': 'Categories and criteria aligned with customer needs and the sales channel.',
        'specs.item2.title': 'Export packaging',
        'specs.item2.text': 'Packaging and handling options designed to preserve fruit quality through logistics.',
        'specs.item3.title': 'Shipping windows',
        'specs.item3.text': 'Scheduling, volumes, and frequency defined together with the customer.',
        'specs.item4.title': 'Documentation',
        'specs.item4.text': 'Support with export documentation according to destination and market requirements.',
        'about.stat1': 'Countries Served',
        'about.stat2': 'Traceability',
        'about.stat3': 'Production Days',
        'fruits.mango': 'Mango',
        'fruits.melon': 'Melon',
        'fruits.lime': 'Lime',
        'fruits.grape': 'Grape',
        'fruits.watermelon': 'Watermelon',
        'fruits.banana': 'Banana',
        'fruits.papaya': 'Papaya',
        'fruits.coconut': 'Coconut',
        'export.title': 'Export Services',
        'export.card1.title': 'Direct Export',
        'export.card1.item1': 'Operation with integrated producers',
        'export.card1.item2': 'Management of logistics and customs procedures',
        'export.card1.item3': 'Complete customs documentation',
        'export.card1.item4': 'Market intelligence',
        'export.card1.item5': 'Selection of local partners',
        'export.card2.title': 'Back-to-Back Export',
        'export.card2.item1': 'Bridge between foreign companies',
        'export.card2.item2': 'Efficient global collaboration',
        'export.card2.item3': 'Reduction of logistics costs',
        'export.card2.item4': 'Agility in transactions',
        'export.card2.item5': 'Quick responses to demands',
        'quality.title': 'Quality and Certifications',
        'quality.intro': 'Our tropical fruits follow the strictest international quality standards, with globally recognized certifications.',
        'quality.item1.title': 'International Certifications',
        'quality.item1.text': 'Products certified according to international food safety standards.',
        'quality.item2.title': 'Quality Control',
        'quality.item2.text': 'Rigorous control at all stages, from harvest to shipment.',
        'quality.item3.title': 'Full Traceability',
        'quality.item3.text': 'Complete tracking system from origin to final destination.',
        'contact.title': 'Get in Touch',
        'contact.intro': 'Interested in our products? Contact us for more information.',
        'contact.form.name': 'Name',
        'contact.form.email': 'Email',
        'contact.form.company': 'Company',
        'contact.form.country': 'Country',
        'contact.form.fruits': 'Fruits of Interest:',
        'contact.form.select_fruits': 'Select fruits',
        'contact.form.fruits_required': 'Please select at least one fruit.',
        'contact.form.message': 'Message',
        'contact.form.submit': 'Send Message',
        'floating.quote': 'Request Quote',
        'footer.text': '© 2026 Marques & Mariano Tropicals. All rights reserved.'
    },
    'es': {
        'nav.home': 'Inicio',
        'nav.about': 'Sobre',
        'nav.portfolio': 'Portafolio',
        'nav.quality': 'Calidad',
        'nav.contact': 'Contacto',
        'hero.title': '¡De Brasil para el mundo!',
        'hero.subtitle': 'Marques & Mariano Tropicals exporta y distribuye frutos tropicales frescos con estándares internacionales. Atendemos a importadores, distribuidores y cadenas minoristas con calidad, trazabilidad y logística segura desde Brasil hasta su mercado.',
        'hero.portfolio': 'Nuestro Portafolio',
        'hero.cta': 'Conozca Nuestros Productos',
        'about.title': 'Sobre Marques & Mariano Tropicals',
        'about.intro': 'Somos una empresa especializada en la exportación de frutos tropicales frescos de Brasil a los principales mercados internacionales, con presencia global consolidada. Atendemos a grandes distribuidores y cadenas de supermercados en todos los continentes, utilizando nuestra relevante red de relaciones y socios comerciales para expansión continua de negocios.',
        'about.card1.title': 'Calidad Premium',
        'about.card1.text': 'Trabajamos con frutos tropicales de estándar internacional, con certificaciones y trazabilidad total de la producción.',
        'about.card2.title': 'Presencia Global',
        'about.card2.text': 'Atendemos más de 20 países en todos los continentes, con operaciones 365 días al año y trazabilidad completa.',
        'about.card3.title': 'Experiencia',
        'about.card3.text': 'Sólida trayectoria en el mercado de exportación con excelencia en servicio, confiabilidad y calidad.',
        'team.title': 'Nuestros Especialistas',
        'team.intro': 'Conozca a los especialistas que lideran Marques & Mariano Tropicals en una sociedad de excelencia, garantizando calidad técnica y experiencia comercial en cada etapa del proceso de exportación de frutos tropicales.',
        'team.pedro.name': 'Pedro Marques',
        'team.pedro.title': 'Ingeniero Agrónomo',
        'team.pedro.description': 'Ingeniero Agrónomo graduado del Instituto Federal del Triángulo Mineiro, con especialización en exportación de frutas tropicales brasileñas. Posee sólida experiencia en la aplicación de principios ESG en la agricultura, incluyendo evaluación de conformidad, sostenibilidad productiva, gobernanza de procesos y adecuación a normas internacionales. Actúa de forma estratégica en la estructuración de sistemas agrícolas más eficientes, trazables y alineados con las exigencias del mercado externo.',
        'team.leonardo.name': 'Leonardo Mariano',
        'team.leonardo.title': 'Especialista en Exportación',
        'team.leonardo.description': 'Especialista en exportación de frutas tropicales brasileñas, estructurando operaciones internacionales con enfoque en seguridad, calidad y logística eficiente. Posee amplia experiencia en negociaciones comerciales, desarrollo de mercados internacionales y gestión de relaciones con importadores y distribuidores globales, garantizando el cumplimiento de plazos y estándares de calidad exigidos por los mercados de destino.',
        'water.title': 'Diferencial de los Frutos: Calidad Superior',
        'water.intro': 'Frutos tropicales de la región con características superiores de calidad, favoreciendo un mejor aprovechamiento para consumo y procesamiento por el comprador.',
        'water.card1.title': 'Calidad Premium',
        'water.card1.text': 'Selección rigurosa de los frutos priorizando calidad, frescura y características ideales para cada mercado.',
        'water.card2.title': 'Excelente para consumo',
        'water.card2.text': 'Perfil ideal para mercados que valoran la experiencia de consumo y la calidad en el <em>in natura</em>.',
        'water.card3.title': 'Consistencia para B2B',
        'water.card3.text': 'Estandarización y criterios comerciales alineados a su mercado y canal de venta.',
        'specs.title': 'Especificaciones & Suministro (bajo consulta)',
        'specs.intro': 'Compartimos ficha técnica, categorías, embalajes y condiciones comerciales según su mercado y destino.',
        'specs.item1.title': 'Selección y estandarización',
        'specs.item1.text': 'Categorías y criterios alineados a la necesidad del cliente y al canal de venta.',
        'specs.item2.title': 'Embalaje para exportación',
        'specs.item2.text': 'Opciones de embalaje y acondicionamiento para preservar el fruto durante la logística.',
        'specs.item3.title': 'Ventanas de embarque',
        'specs.item3.text': 'Programación, volúmenes y frecuencia definidos junto con el cliente.',
        'specs.item4.title': 'Documentación',
        'specs.item4.text': 'Soporte con documentación de exportación según destino y requisitos del mercado.',
        'about.title': 'Sobre Marques & Mariano Tropicals',
        'about.intro': 'Somos una empresa especializada en la exportación de frutos tropicales frescos de Brasil a los principales mercados internacionales, con presencia global consolidada. Atendemos a grandes distribuidores y cadenas de supermercados en todos los continentes, utilizando nuestra relevante red de relaciones y socios comerciales para expansión continua de negocios.',
        'about.card1.title': 'Calidad Premium',
        'about.card1.text': 'Trabajamos con frutos tropicales de estándar internacional, con certificaciones y trazabilidad total de la producción.',
        'about.card2.title': 'Presencia Global',
        'about.card2.text': 'Atendemos más de 20 países en todos los continentes, con operaciones 365 días al año y trazabilidad completa.',
        'about.card3.title': 'Experiencia',
        'about.card3.text': 'Sólida trayectoria en el mercado de exportación con excelencia en servicio, confiabilidad y calidad.',
        'about.stat1': 'Países Atendidos',
        'about.stat2': 'Trazabilidad',
        'about.stat3': 'Días de Producción',
        'fruits.mango': 'Mango',
        'fruits.melon': 'Melón',
        'fruits.lime': 'Lima',
        'fruits.grape': 'Uva',
        'fruits.watermelon': 'Sandía',
        'fruits.banana': 'Plátano',
        'fruits.papaya': 'Papaya',
        'fruits.coconut': 'Coco',
        'export.title': 'Servicios de Exportación',
        'export.card1.title': 'Exportación Directa',
        'export.card1.item1': 'Operación con productores integrados',
        'export.card1.item2': 'Gestión de trámites logísticos y aduaneros',
        'export.card1.item3': 'Documentación aduanera completa',
        'export.card1.item4': 'Inteligencia de mercado',
        'export.card1.item5': 'Selección de socios locales',
        'export.card2.title': 'Exportación Back-to-Back',
        'export.card2.item1': 'Puente entre empresas extranjeras',
        'export.card2.item2': 'Colaboración global eficiente',
        'export.card2.item3': 'Reducción de costos logísticos',
        'export.card2.item4': 'Agilidad en las transacciones',
        'export.card2.item5': 'Respuestas rápidas a las demandas',
        'quality.title': 'Calidad y Certificaciones',
        'quality.intro': 'Nuestros frutos tropicales siguen los más rigurosos estándares internacionales de calidad, con certificaciones reconocidas globalmente.',
        'quality.item1.title': 'Certificaciones Internacionales',
        'quality.item1.text': 'Productos certificados según normas internacionales de seguridad alimentaria.',
        'quality.item2.title': 'Control de Calidad',
        'quality.item2.text': 'Control riguroso en todas las etapas, desde la cosecha hasta el embarque.',
        'quality.item3.title': 'Trazabilidad Total',
        'quality.item3.text': 'Sistema completo de rastreo desde el origen hasta el destino final.',
        'contact.title': 'Póngase en Contacto',
        'contact.intro': '¿Interesado en nuestros productos? Contáctenos para más información.',
        'contact.form.name': 'Nombre',
        'contact.form.email': 'Email',
        'contact.form.company': 'Empresa',
        'contact.form.country': 'País',
        'contact.form.fruits': 'Frutas de Interés:',
        'contact.form.select_fruits': 'Seleccionar frutas',
        'contact.form.fruits_required': 'Por favor, seleccione al menos una fruta.',
        'contact.form.message': 'Mensaje',
        'contact.form.submit': 'Enviar Mensaje',
        'floating.quote': 'Solicitar Cotización',
        'footer.text': '© 2026 Marques & Mariano Tropicals. Todos los derechos reservados.'
    }
};

let currentLanguage = 'pt-BR';

const languageMeta = {
    'pt-BR': { flagClass: 'lang-flag--br', code: 'PT' },
    'en': { flagClass: 'lang-flag--en', code: 'EN' },
    'es': { flagClass: 'lang-flag--es', code: 'ES' }
};

function updateLanguageSelectorUI(lang) {
    const float = document.querySelector('.lang-float');
    if (!float) return;

    const toggle = float.querySelector('.lang-float-toggle');
    const toggleFlag = float.querySelector('.lang-float-toggle .lang-flag');
    const toggleCode = float.querySelector('.lang-float-toggle .lang-code');
    const meta = languageMeta[lang];

    if (toggleFlag && meta) {
        toggleFlag.classList.remove('lang-flag--br', 'lang-flag--en', 'lang-flag--es');
        toggleFlag.classList.add(meta.flagClass);
    }
    if (toggleCode && meta) toggleCode.textContent = meta.code;

    const options = float.querySelectorAll('.lang-option');
    options.forEach(opt => {
        opt.setAttribute('aria-selected', opt.getAttribute('data-lang') === lang ? 'true' : 'false');
    });

    if (toggle) toggle.setAttribute('aria-expanded', float.classList.contains('open') ? 'true' : 'false');
}

function changeLanguage(lang) {
    currentLanguage = lang;
    
    document.querySelectorAll('[data-i18n]').forEach(element => {
        const key = element.getAttribute('data-i18n');
        if (translations[lang] && translations[lang][key]) {
            element.innerHTML = translations[lang][key];
        }
    });
    
    document.querySelectorAll('[data-i18n-placeholder]').forEach(element => {
        const key = element.getAttribute('data-i18n-placeholder');
        if (translations[lang] && translations[lang][key]) {
            element.placeholder = translations[lang][key];
        }
    });
    
    updateLanguageSelectorUI(lang);

    if (window.lucide && typeof window.lucide.createIcons === 'function') {
        window.lucide.createIcons();
    }
    
    document.documentElement.lang = lang;
}

function saveLanguagePreference(lang) {
    localStorage.setItem('preferredLanguage', lang);
}

document.addEventListener('DOMContentLoaded', function() {
    // Sistema Híbrido: PT-BR para primeira visita, depois respeita preferência
    const savedLanguage = localStorage.getItem('preferredLanguage');
    const defaultLanguage = savedLanguage || 'pt-BR';
    
    changeLanguage(defaultLanguage);

    if (window.lucide && typeof window.lucide.createIcons === 'function') {
        window.lucide.createIcons();
    }

    const langFloat = document.querySelector('.lang-float');
    if (langFloat) {
        const toggle = langFloat.querySelector('.lang-float-toggle');
        const menu = langFloat.querySelector('.lang-float-menu');

        if (toggle) {
            toggle.addEventListener('click', function() {
                langFloat.classList.toggle('open');
                toggle.setAttribute('aria-expanded', langFloat.classList.contains('open') ? 'true' : 'false');
            });
        }

        langFloat.querySelectorAll('.lang-option').forEach(opt => {
            opt.addEventListener('click', function() {
                const lang = this.getAttribute('data-lang');
                changeLanguage(lang);
                saveLanguagePreference(lang); // Salva preferência quando usuário escolhe
                langFloat.classList.remove('open');
                if (toggle) toggle.setAttribute('aria-expanded', 'false');
            });
        });

        document.addEventListener('click', function(e) {
            if (!langFloat.contains(e.target)) {
                langFloat.classList.remove('open');
                if (toggle) toggle.setAttribute('aria-expanded', 'false');
            }
        });

        document.addEventListener('keydown', function(e) {
            if (e.key === 'Escape') {
                langFloat.classList.remove('open');
                if (toggle) toggle.setAttribute('aria-expanded', 'false');
            }
        });

        if (menu) {
            menu.addEventListener('click', function(e) {
                e.stopPropagation();
            });
        }
    }
    
    const hamburger = document.querySelector('.hamburger');
    const navMenu = document.querySelector('.nav-menu');
    const navLinks = document.querySelectorAll('.nav-menu a');

    hamburger.addEventListener('click', function() {
        navMenu.classList.toggle('active');
        hamburger.classList.toggle('active');
    });

    navLinks.forEach(link => {
        link.addEventListener('click', function(e) {
            // Don't close menu if clicking on portfolio toggle
            if (link.classList.contains('portfolio-toggle')) {
                return;
            }
            navMenu.classList.remove('active');
            hamburger.classList.remove('active');
        });
    });

    // NOVO PORTFOLIO MENU - SIMPLES E FUNCIONAL
    const portfolioMenu = document.querySelector('.portfolio-menu');
    const portfolioToggle = document.querySelector('.portfolio-toggle');
    
    if (portfolioMenu && portfolioToggle) {
        // Click functionality for mobile
        portfolioToggle.addEventListener('click', function(e) {
            e.preventDefault();
            portfolioMenu.classList.toggle('active');
            console.log('Portfolio menu clicked, active:', portfolioMenu.classList.contains('active'));
        });
        
        // Close when clicking outside
        document.addEventListener('click', function(e) {
            if (!portfolioMenu.contains(e.target)) {
                portfolioMenu.classList.remove('active');
            }
        });
    }

    const contactForm = document.querySelector('.contact-form');
    if (contactForm) {
        contactForm.addEventListener('submit', async function(e) {
            e.preventDefault();

            // Validate fruits selection
            if (!validateFruitsSelection()) {
                return;
            }

            // Basic form validation
            if (!contactForm.checkValidity()) {
                contactForm.reportValidity();
                return;
            }

            const webhookUrl = 'https://n8n-n8n-start.brwjwh.easypanel.host/webhook/c36316d0-9745-4fc9-ae15-1d47cb606d6f';
            const submitButton = contactForm.querySelector('button[type="submit"]');
            const originalButtonText = submitButton ? submitButton.textContent : '';

            const statusMessages = {
                'pt-BR': {
                    sending: 'Enviando...',
                    success: 'Mensagem enviada com sucesso! Entraremos em contato em breve.',
                    error: 'Não foi possível enviar a mensagem agora. Tente novamente em instantes.'
                },
                'en': {
                    sending: 'Sending...',
                    success: 'Message sent successfully! We will contact you soon.',
                    error: 'We could not send your message right now. Please try again shortly.'
                },
                'es': {
                    sending: 'Enviando...',
                    success: '¡Mensaje enviado con éxito! Nos pondremos en contacto pronto.',
                    error: 'No pudimos enviar su mensaje ahora. Inténtelo de nuevo en unos momentos.'
                }
            };

            const langMessages = statusMessages[currentLanguage] || statusMessages['pt-BR'];

            try {
                if (submitButton) {
                    submitButton.disabled = true;
                    submitButton.textContent = langMessages.sending;
                }

                const payload = {
                    name: (contactForm.querySelector('[name="name"]') || {}).value || '',
                    email: (contactForm.querySelector('[name="email"]') || {}).value || '',
                    company: (contactForm.querySelector('[name="company"]') || {}).value || '',
                    country: (contactForm.querySelector('[name="country"]') || {}).value || '',
                    message: (contactForm.querySelector('[name="message"]') || {}).value || '',
                    language: currentLanguage,
                    pageUrl: window.location.href,
                    submittedAt: new Date().toISOString()
                };

                const response = await fetch(webhookUrl, {
                    method: 'POST',
                    headers: {
                        'Content-Type': 'application/json'
                    },
                    body: JSON.stringify(payload)
                });

                if (!response.ok) {
                    throw new Error(`HTTP ${response.status}`);
                }

                alert(langMessages.success);
                contactForm.reset();
            } catch (err) {
                alert(langMessages.error);
            } finally {
                if (submitButton) {
                    submitButton.disabled = false;
                    submitButton.textContent = originalButtonText;
                }
            }
        });
    }

    const ctaButton = document.querySelector('.cta-button');
    ctaButton.addEventListener('click', function() {
        document.querySelector('#about').scrollIntoView({ 
            behavior: 'smooth' 
        });
    });

    document.querySelectorAll('a[href^="#"]').forEach(anchor => {
        anchor.addEventListener('click', function(e) {
            e.preventDefault();
            const target = document.querySelector(this.getAttribute('href'));
            if (target) {
                target.scrollIntoView({
                    behavior: 'smooth',
                    block: 'start'
                });
            }
        });
    });

    window.addEventListener('scroll', function() {
        const navbar = document.querySelector('.navbar');
        if (window.scrollY > 100) {
            navbar.classList.add('scrolled');
        } else {
            navbar.classList.remove('scrolled');
        }
    });

    const animatedElements = document.querySelectorAll('.about-card, .business-card, .quality-item, .export-card');
    const observerOptions = {
        threshold: 0.1,
        rootMargin: '0px 0px -50px 0px'
    };

    const observer = new IntersectionObserver(function(entries) {
        entries.forEach(entry => {
            if (entry.isIntersecting) {
                entry.target.style.opacity = '1';
                entry.target.style.transform = 'translateY(0)';
            }
        });
    }, observerOptions);

    animatedElements.forEach(element => {
        element.style.opacity = '0';
        element.style.transform = 'translateY(30px)';
        element.style.transition = 'opacity 0.6s ease, transform 0.6s ease';
        observer.observe(element);
    });
    
    const statNumbers = document.querySelectorAll('.stat-number');
    const statsObserver = new IntersectionObserver(function(entries) {
        entries.forEach(entry => {
            if (entry.isIntersecting && !entry.target.classList.contains('counted')) {
                entry.target.classList.add('counted');
                animateNumber(entry.target);
            }
        });
    }, { threshold: 0.5 });

    statNumbers.forEach(stat => {
        statsObserver.observe(stat);
    });
});

function animateNumber(element) {
    const text = element.textContent;
    const hasPlus = text.includes('+');
    const hasPercent = text.includes('%');
    const number = parseInt(text.replace(/[^0-9]/g, ''));
    
    let current = 0;
    const increment = number / 50;
    const timer = setInterval(() => {
        current += increment;
        if (current >= number) {
            current = number;
            clearInterval(timer);
        }
        element.textContent = Math.floor(current) + (hasPlus ? '+' : '') + (hasPercent ? '%' : '');
    }, 30);
}

// Fruits validation function
function validateFruitsSelection() {
    const desktopCheckboxes = document.querySelectorAll('.desktop-fruits input[type="checkbox"]:checked');
    const mobileCheckboxes = document.querySelectorAll('.mobile-fruits-dropdown input[type="checkbox"]:checked');
    const fruitsError = document.getElementById('fruitsError');
    
    const hasSelection = desktopCheckboxes.length > 0 || mobileCheckboxes.length > 0;
    
    if (!hasSelection) {
        fruitsError.style.display = 'block';
        fruitsError.scrollIntoView({ behavior: 'smooth', block: 'center' });
        return false;
    } else {
        fruitsError.style.display = 'none';
        return true;
    }
}

// Mobile Fruits Dropdown Functionality
document.addEventListener('DOMContentLoaded', function() {
    const fruitsDropdownToggle = document.getElementById('fruitsDropdownToggle');
    const fruitsDropdownMenu = document.getElementById('fruitsDropdownMenu');
    const fruitsCount = document.getElementById('fruitsCount');
    
    if (fruitsDropdownToggle && fruitsDropdownMenu) {
        fruitsDropdownToggle.addEventListener('click', function(e) {
            e.preventDefault();
            e.stopPropagation();
            
            fruitsDropdownToggle.classList.toggle('active');
            fruitsDropdownMenu.classList.toggle('show');
        });
        
        // Close dropdown when clicking outside
        document.addEventListener('click', function(e) {
            if (!fruitsDropdownToggle.contains(e.target) && !fruitsDropdownMenu.contains(e.target)) {
                fruitsDropdownToggle.classList.remove('active');
                fruitsDropdownMenu.classList.remove('show');
            }
        });
        
        // Update counter when checkboxes change
        const mobileCheckboxes = fruitsDropdownMenu.querySelectorAll('input[type="checkbox"]');
        
        function updateFruitsCounter() {
            const checkedCount = Array.from(mobileCheckboxes).filter(cb => cb.checked).length;
            
            if (checkedCount > 0) {
                fruitsCount.textContent = checkedCount;
                fruitsCount.classList.add('show');
            } else {
                fruitsCount.classList.remove('show');
            }
        }
        
        mobileCheckboxes.forEach(checkbox => {
            checkbox.addEventListener('change', updateFruitsCounter);
        });
        
        // Initial counter update
        updateFruitsCounter();
    }
    
    // Hide error message when fruits are selected
    const allFruitsCheckboxes = document.querySelectorAll('input[name="fruits"]');
    allFruitsCheckboxes.forEach(checkbox => {
        checkbox.addEventListener('change', function() {
            const fruitsError = document.getElementById('fruitsError');
            if (fruitsError && fruitsError.style.display === 'block') {
                validateFruitsSelection();
            }
        });
    });
});
