// Papaya specific translations
const papayaTranslations = {
    'pt-BR': {
        'papaya.title': 'Mamão',
        'papaya.subtitle': 'Fruta tropical de polpa doce e suculenta, rica em vitaminas A e C. Possui formato alongado e casca lisa que varia do verde ao amarelo quando maduro.',
        'papaya.seasonality.title': 'Sazonalidade',
        'papaya.seasonality.high': 'Alta Disponibilidade',
        'papaya.seasonality.medium': 'Média Disponibilidade',
        'papaya.regions.title': 'Nossos Parceiros pelo Brasil',
        'papaya.regions.main.title': 'Principais Estados Produtores',
        'papaya.regions.main.description': 'Regiões estratégicas com condições climáticas ideais e tecnologia avançada para produção de mamão de alta qualidade durante todo o ano.',
        'papaya.regions.bahia.description': 'Principal estado produtor de mamão do Brasil, com condições climáticas ideais e tecnologia avançada para produção durante todo o ano.',
        'papaya.regions.espiritosanto.description': 'Segundo maior produtor nacional, reconhecido pela qualidade superior e tecnologia de cultivo sustentável.',
        'papaya.regions.riograndedonorte.description': 'Região estratégica com clima semiárido favorável e irrigação tecnificada para produção contínua.',
        'papaya.varieties.title': 'Variedades',
        'papaya.varieties.sunrise.title': 'Sunrise Solo cv. 72/12',
        'papaya.varieties.sunrise.description': 'Variedade premium com 13 ºBrix, polpa doce e consistente, ideal para exportação e mercados exigentes.',
        'papaya.varieties.alianca.title': 'Aliança',
        'papaya.varieties.alianca.description': 'Variedade nacional com 13 ºBrix, excelente sabor e resistência, adequada para diversos mercados.',
        'papaya.varieties.kapoho.title': 'Kapoho Solo',
        'papaya.varieties.kapoho.description': 'Variedade tradicional havaiana, frutos pequenos e doces, muito apreciada no mercado internacional.',
        'papaya.commercialization.title': 'Comercialização',
        'papaya.commercialization.specs.title': 'Especificações Técnicas',
        'papaya.commercialization.pallet.title': 'Pallet',
        'papaya.commercialization.pallet.boxes': 'Caixas por Pallet:',
        'papaya.commercialization.pallet.note': 'Observação:',
        'papaya.commercialization.pallet.variety': 'A depender da variedade',
        'papaya.commercialization.brix.title': 'Qualidade',
        'papaya.commercialization.quality': 'Padrão:',
        'papaya.commercialization.export': 'Exportação',
        'papaya.contact.title': 'Interessado em Mamão?',
        'papaya.contact.subtitle': 'Entre em contato conosco para mais informações sobre disponibilidade, preços e especificações técnicas.',
        'papaya.contact.cta': 'Solicitar Cotação',
        'months.jan': 'Jan',
        'months.feb': 'Fev',
        'months.mar': 'Mar',
        'months.apr': 'Abr',
        'months.may': 'Mai',
        'months.jun': 'Jun',
        'months.jul': 'Jul',
        'months.aug': 'Ago',
        'months.sep': 'Set',
        'months.oct': 'Out',
        'months.nov': 'Nov',
        'months.dec': 'Dez'
    },
    'en': {
        'papaya.title': 'Papaya',
        'papaya.subtitle': 'Tropical fruit with sweet and juicy pulp, rich in vitamins A and C. Has an elongated shape and smooth skin that varies from green to yellow when ripe.',
        'papaya.seasonality.title': 'Seasonality',
        'papaya.seasonality.high': 'High Availability',
        'papaya.seasonality.medium': 'Medium Availability',
        'papaya.regions.title': 'Our Partners Across Brazil',
        'papaya.regions.main.title': 'Main Producing States',
        'papaya.regions.main.description': 'Strategic regions with ideal climatic conditions and advanced technology for high-quality papaya production year-round.',
        'papaya.regions.bahia.description': 'Brazil\'s main papaya producing state, with ideal climatic conditions and advanced technology for year-round production.',
        'papaya.regions.espiritosanto.description': 'Second largest national producer, recognized for superior quality and sustainable cultivation technology.',
        'papaya.regions.riograndedonorte.description': 'Strategic region with favorable semi-arid climate and technified irrigation for continuous production.',
        'papaya.varieties.title': 'Varieties',
        'papaya.varieties.sunrise.title': 'Sunrise Solo cv. 72/12',
        'papaya.varieties.sunrise.description': 'Premium variety with 13 ºBrix, sweet and consistent pulp, ideal for export and demanding markets.',
        'papaya.varieties.alianca.title': 'Aliança',
        'papaya.varieties.alianca.description': 'National variety with 13 ºBrix, excellent flavor and resistance, suitable for various markets.',
        'papaya.varieties.kapoho.title': 'Kapoho Solo',
        'papaya.varieties.kapoho.description': 'Traditional Hawaiian variety, small and sweet fruits, highly appreciated in the international market.',
        'papaya.commercialization.title': 'Commercialization',
        'papaya.commercialization.specs.title': 'Technical Specifications',
        'papaya.commercialization.pallet.title': 'Pallet',
        'papaya.commercialization.pallet.boxes': 'Boxes per Pallet:',
        'papaya.commercialization.pallet.note': 'Note:',
        'papaya.commercialization.pallet.variety': 'Depending on variety',
        'papaya.commercialization.brix.title': 'Quality',
        'papaya.commercialization.quality': 'Standard:',
        'papaya.commercialization.export': 'Export',
        'papaya.contact.title': 'Interested in Papaya?',
        'papaya.contact.subtitle': 'Contact us for more information about availability, prices and technical specifications.',
        'papaya.contact.cta': 'Request Quote',
        'months.jan': 'Jan',
        'months.feb': 'Feb',
        'months.mar': 'Mar',
        'months.apr': 'Apr',
        'months.may': 'May',
        'months.jun': 'Jun',
        'months.jul': 'Jul',
        'months.aug': 'Aug',
        'months.sep': 'Sep',
        'months.oct': 'Oct',
        'months.nov': 'Nov',
        'months.dec': 'Dec'
    },
    'es': {
        'papaya.title': 'Papaya',
        'papaya.subtitle': 'Fruta tropical de pulpa dulce y jugosa, rica en vitaminas A y C. Tiene forma alargada y piel lisa que varía del verde al amarillo cuando madura.',
        'papaya.seasonality.title': 'Estacionalidad',
        'papaya.seasonality.high': 'Alta Disponibilidad',
        'papaya.seasonality.medium': 'Disponibilidad Media',
        'papaya.regions.title': 'Nuestros Socios por Brasil',
        'papaya.regions.main.title': 'Principales Estados Productores',
        'papaya.regions.main.description': 'Regiones estratégicas con condiciones climáticas ideales y tecnología avanzada para producción de papaya de alta calidad durante todo el año.',
        'papaya.regions.bahia.description': 'Principal estado productor de papaya de Brasil, con condiciones climáticas ideales y tecnología avanzada para producción durante todo el año.',
        'papaya.regions.espiritosanto.description': 'Segundo mayor productor nacional, reconocido por calidad superior y tecnología de cultivo sostenible.',
        'papaya.regions.riograndedonorte.description': 'Región estratégica con clima semiárido favorable e irrigación tecnificada para producción continua.',
        'papaya.varieties.title': 'Variedades',
        'papaya.varieties.sunrise.title': 'Sunrise Solo cv. 72/12',
        'papaya.varieties.sunrise.description': 'Variedad premium con 13 ºBrix, pulpa dulce y consistente, ideal para exportación y mercados exigentes.',
        'papaya.varieties.alianca.title': 'Aliança',
        'papaya.varieties.alianca.description': 'Variedad nacional con 13 ºBrix, excelente sabor y resistencia, adecuada para diversos mercados.',
        'papaya.varieties.kapoho.title': 'Kapoho Solo',
        'papaya.varieties.kapoho.description': 'Variedad tradicional hawaiana, frutos pequeños y dulces, muy apreciada en el mercado internacional.',
        'papaya.commercialization.title': 'Comercialización',
        'papaya.commercialization.specs.title': 'Especificaciones Técnicas',
        'papaya.commercialization.pallet.title': 'Pallet',
        'papaya.commercialization.pallet.boxes': 'Cajas por Pallet:',
        'papaya.commercialization.pallet.note': 'Observación:',
        'papaya.commercialization.pallet.variety': 'Dependiendo de la variedad',
        'papaya.commercialization.brix.title': 'Calidad',
        'papaya.commercialization.quality': 'Estándar:',
        'papaya.commercialization.export': 'Exportación',
        'papaya.contact.title': '¿Interesado en Papaya?',
        'papaya.contact.subtitle': 'Contáctenos para más información sobre disponibilidad, precios y especificaciones técnicas.',
        'papaya.contact.cta': 'Solicitar Cotización',
        'months.jan': 'Ene',
        'months.feb': 'Feb',
        'months.mar': 'Mar',
        'months.apr': 'Abr',
        'months.may': 'May',
        'months.jun': 'Jun',
        'months.jul': 'Jul',
        'months.aug': 'Ago',
        'months.sep': 'Sep',
        'months.oct': 'Oct',
        'months.nov': 'Nov',
        'months.dec': 'Dic'
    }
};

// Wait for DOM and main script to load
document.addEventListener('DOMContentLoaded', function() {
    // Extend main translations with papaya specific ones
    if (typeof translations !== 'undefined') {
        Object.keys(papayaTranslations).forEach(lang => {
            if (translations[lang]) {
                Object.assign(translations[lang], papayaTranslations[lang]);
            }
        });
    }

    // Initialize language functionality
    initializeLanguage();
    
    // Initialize Lucide icons
    if (window.lucide && typeof window.lucide.createIcons === 'function') {
        window.lucide.createIcons();
    }
});

// Language functionality for portfolio pages
function initializeLanguage() {
    const langToggle = document.querySelector('.lang-float-toggle');
    const langMenu = document.querySelector('.lang-float-menu');
    const langOptions = document.querySelectorAll('.lang-option');

    if (!langToggle || !langMenu) return;

    // Toggle language menu
    langToggle.addEventListener('click', function(e) {
        e.preventDefault();
        e.stopPropagation();
        const isExpanded = langToggle.getAttribute('aria-expanded') === 'true';
        langToggle.setAttribute('aria-expanded', !isExpanded);
        langMenu.classList.toggle('active');
    });

    // Close menu when clicking outside
    document.addEventListener('click', function(e) {
        if (!e.target.closest('.lang-float')) {
            langToggle.setAttribute('aria-expanded', 'false');
            langMenu.classList.remove('active');
        }
    });

    // Handle language selection
    langOptions.forEach(option => {
        option.addEventListener('click', function(e) {
            e.preventDefault();
            const selectedLang = this.getAttribute('data-lang');
            changeLanguage(selectedLang);
            
            // Save preference when user chooses (Sistema Híbrido)
            localStorage.setItem('preferredLanguage', selectedLang);
            
            // Update UI
            langOptions.forEach(opt => opt.setAttribute('aria-selected', 'false'));
            this.setAttribute('aria-selected', 'true');
            
            // Update toggle button
            const flagClass = selectedLang === 'pt-BR' ? 'lang-flag--br' : 
                             selectedLang === 'en' ? 'lang-flag--en' : 'lang-flag--es';
            const langCode = selectedLang === 'pt-BR' ? 'PT' : 
                            selectedLang === 'en' ? 'EN' : 'ES';
            
            langToggle.querySelector('.lang-flag').className = `lang-flag ${flagClass}`;
            langToggle.querySelector('.lang-code').textContent = langCode;
            
            // Close menu
            langToggle.setAttribute('aria-expanded', 'false');
            langMenu.classList.remove('active');
        });
    });

    // Load saved language preference
    const savedLang = localStorage.getItem('preferredLanguage') || 'pt-BR';
    const savedOption = document.querySelector(`[data-lang="${savedLang}"]`);
    if (savedOption) {
        savedOption.click();
    }
}

function changeLanguage(lang) {
    if (!translations || !translations[lang]) return;
    
    // Update all elements with data-i18n attributes
    document.querySelectorAll('[data-i18n]').forEach(element => {
        const key = element.getAttribute('data-i18n');
        const translation = translations[lang][key];
        
        if (translation) {
            // Handle HTML content (for elements that might contain <em> tags)
            if (translation.includes('<em>') || translation.includes('</em>')) {
                element.innerHTML = translation;
            } else {
                element.textContent = translation;
            }
        }
    });
    
    // Update document language
    document.documentElement.lang = lang;
}
