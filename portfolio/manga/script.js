// Mango specific translations
const mangoTranslations = {
    'pt-BR': {
        'mango.title': 'Manga',
        'mango.subtitle': 'Fruta tropical de polpa suculenta, doce e aromática. Disponível em diversas variedades com características únicas de sabor, textura e períodos de safra, atendendo aos mais rigorosos padrões de exportação.',
        'mango.varieties.title': 'Variedades e Sazonalidade',
        'mango.varieties.intro': 'Cada variedade de manga possui características únicas e períodos de maior disponibilidade ao longo do ano:',
        'mango.varieties.tommy.title': 'Tommy Atkins',
        'mango.varieties.haden.title': 'Haden',
        'mango.varieties.palmer.title': 'Palmer',
        'mango.varieties.keitt.title': 'Keitt',
        'mango.varieties.kent.title': 'Kent',
        'mango.regions.title': 'Nossos Parceiros Produtores pelo Brasil',
        'mango.regions.saofrancisco.title': 'Vale do São Francisco',
        'mango.regions.saofrancisco.description': 'Principal região produtora de manga para exportação no Brasil, reconhecida internacionalmente pela qualidade superior e tecnologia de irrigação avançada.',
        'mango.regions.petrolina': 'Centro de excelência em fruticultura irrigada, com produção durante todo o ano e padrões internacionais de qualidade.',
        'mango.regions.juazeiro': 'Polo complementar de Petrolina, com infraestrutura logística avançada e produção focada em variedades para exportação.',
        'specs.weight': 'Peso:',
        'specs.fiber': 'Fibras:',
        'specs.fiber.medium': 'Teor médio',
        'specs.fiber.moderate': 'Moderada quantidade',
        'specs.fiber.low': 'Baixo',
        'specs.packaging': 'Embalagem:',
        'specs.pallet': 'Pallet:',
        'specs.calibers': 'Calibres:',
        'mango.contact.title': 'Interessado em Manga?',
        'mango.contact.subtitle': 'Entre em contato conosco para mais informações sobre disponibilidade das variedades, janelas de safra e especificações técnicas.',
        'mango.contact.cta': 'Solicitar Cotação',
        'seasonality.mini.title': 'Sazonalidade',
        'seasonality.high': 'Maior Disponibilidade',
        'seasonality.medium': 'Disponibilidade Moderada',
        'seasonality.low': 'Menor Disponibilidade',
        'specs.net': 'líq.',
        'specs.gross': 'bruto',
        'specs.boxes': 'caixas',
        'months.jan': 'Jan',
        'months.feb': 'Fev',
        'months.mar': 'Mar',
        'months.apr': 'Abr',
        'months.may': 'Mai',
        'months.jun': 'Jun',
        'months.jul': 'Jul',
        'months.aug': 'Ago',
        'months.sep': 'Set',
        'months.oct': 'Out',
        'months.nov': 'Nov',
        'months.dec': 'Dez'
    },
    'en': {
        'mango.title': 'Mango',
        'mango.subtitle': 'Tropical fruit with succulent, sweet and aromatic pulp. Available in various varieties with unique flavor, texture and harvest season characteristics, meeting the most rigorous export standards.',
        'mango.varieties.title': 'Varieties and Seasonality',
        'mango.varieties.intro': 'Each mango variety has unique characteristics and periods of greater availability throughout the year:',
        'mango.varieties.tommy.title': 'Tommy Atkins',
        'mango.varieties.haden.title': 'Haden',
        'mango.varieties.palmer.title': 'Palmer',
        'mango.varieties.keitt.title': 'Keitt',
        'mango.varieties.kent.title': 'Kent',
        'mango.regions.title': 'Our Producer Partners Across Brazil',
        'mango.regions.saofrancisco.title': 'São Francisco Valley',
        'mango.regions.saofrancisco.description': 'Brazil\'s main mango producing region for export, internationally recognized for superior quality and advanced irrigation technology.',
        'mango.regions.petrolina': 'Center of excellence in irrigated fruit growing, with year-round production and international quality standards.',
        'mango.regions.juazeiro': 'Complementary hub to Petrolina, with advanced logistics infrastructure and production focused on export varieties.',
        'specs.weight': 'Weight:',
        'specs.fiber': 'Fibers:',
        'specs.fiber.medium': 'Medium content',
        'specs.fiber.moderate': 'Moderate amount',
        'specs.fiber.low': 'Low',
        'specs.packaging': 'Packaging:',
        'specs.pallet': 'Pallet:',
        'specs.calibers': 'Calibers:',
        'mango.contact.title': 'Interested in Mango?',
        'mango.contact.subtitle': 'Contact us for more information about variety availability, harvest windows and technical specifications.',
        'mango.contact.cta': 'Request Quote',
        'seasonality.mini.title': 'Seasonality',
        'seasonality.high': 'High Availability',
        'seasonality.medium': 'Moderate Availability',
        'seasonality.low': 'Low Availability',
        'specs.net': 'net',
        'specs.gross': 'gross',
        'specs.boxes': 'boxes',
        'months.jan': 'Jan',
        'months.feb': 'Feb',
        'months.mar': 'Mar',
        'months.apr': 'Apr',
        'months.may': 'May',
        'months.jun': 'Jun',
        'months.jul': 'Jul',
        'months.aug': 'Aug',
        'months.sep': 'Sep',
        'months.oct': 'Oct',
        'months.nov': 'Nov',
        'months.dec': 'Dec'
    },
    'es': {
        'mango.title': 'Mango',
        'mango.subtitle': 'Fruta tropical de pulpa suculenta, dulce y aromática. Disponible en diversas variedades con características únicas de sabor, textura y períodos de cosecha, cumpliendo los más rigurosos estándares de exportación.',
        'mango.varieties.title': 'Variedades y Estacionalidad',
        'mango.varieties.intro': 'Cada variedad de mango posee características únicas y períodos de mayor disponibilidad a lo largo del año:',
        'mango.varieties.tommy.title': 'Tommy Atkins',
        'mango.varieties.haden.title': 'Haden',
        'mango.varieties.palmer.title': 'Palmer',
        'mango.varieties.keitt.title': 'Keitt',
        'mango.varieties.kent.title': 'Kent',
        'specs.weight': 'Peso:',
        'specs.fiber': 'Fibras:',
        'specs.fiber.medium': 'Contenido medio',
        'specs.fiber.moderate': 'Cantidad moderada',
        'specs.fiber.low': 'Bajo',
        'mango.regions.title': 'Nuestros Socios Productores por Brasil',
        'mango.regions.saofrancisco.title': 'Valle del São Francisco',
        'mango.regions.saofrancisco.description': 'Principal región productora de mango para exportación en Brasil, reconocida internacionalmente por su calidad superior y tecnología de riego avanzada.',
        'mango.regions.petrolina': 'Centro de excelencia en fruticultura irrigada, con producción durante todo el año y estándares internacionales de calidad.',
        'mango.regions.juazeiro': 'Polo complementario de Petrolina, con infraestructura logística avanzada y producción enfocada en variedades para exportación.',
        'specs.packaging': 'Embalaje:',
        'specs.pallet': 'Pallet:',
        'specs.calibers': 'Calibres:',
        'mango.contact.title': '¿Interesado en Mango?',
        'mango.contact.subtitle': 'Contáctenos para más información sobre disponibilidad de variedades, ventanas de cosecha y especificaciones técnicas.',
        'mango.contact.cta': 'Solicitar Cotización',
        'months.jan': 'Ene',
        'months.feb': 'Feb',
        'months.mar': 'Mar',
        'months.apr': 'Abr',
        'months.may': 'May',
        'months.jun': 'Jun',
        'months.jul': 'Jul',
        'months.aug': 'Ago',
        'months.sep': 'Sep',
        'months.oct': 'Oct',
        'months.nov': 'Nov',
        'months.dec': 'Dic',
        'seasonality.mini.title': 'Estacionalidad',
        'seasonality.high': 'Alta Disponibilidad',
        'seasonality.medium': 'Disponibilidad Moderada',
        'seasonality.low': 'Baja Disponibilidad',
        'specs.net': 'neto',
        'specs.gross': 'bruto',
        'specs.boxes': 'cajas'
    }
};

// Wait for DOM and main script to load
document.addEventListener('DOMContentLoaded', function() {
    // Extend main translations with mango specific ones
    if (typeof translations !== 'undefined') {
        Object.keys(mangoTranslations).forEach(lang => {
            if (translations[lang]) {
                Object.assign(translations[lang], mangoTranslations[lang]);
            }
        });
    }

    // Initialize language functionality
    initializeLanguage();
    
    // Initialize Lucide icons
    if (window.lucide && typeof window.lucide.createIcons === 'function') {
        window.lucide.createIcons();
    }
});

// Language functionality for portfolio pages
function initializeLanguage() {
    const langToggle = document.querySelector('.lang-float-toggle');
    const langMenu = document.querySelector('.lang-float-menu');
    const langOptions = document.querySelectorAll('.lang-option');

    if (!langToggle || !langMenu) return;

    // Toggle language menu
    langToggle.addEventListener('click', function(e) {
        e.preventDefault();
        e.stopPropagation();
        const isExpanded = langToggle.getAttribute('aria-expanded') === 'true';
        langToggle.setAttribute('aria-expanded', !isExpanded);
        langMenu.classList.toggle('active');
    });

    // Close menu when clicking outside
    document.addEventListener('click', function(e) {
        if (!e.target.closest('.lang-float')) {
            langToggle.setAttribute('aria-expanded', 'false');
            langMenu.classList.remove('active');
        }
    });

    // Handle language selection
    langOptions.forEach(option => {
        option.addEventListener('click', function(e) {
            e.preventDefault();
            const selectedLang = this.getAttribute('data-lang');
            changeLanguage(selectedLang);
            
            // Update UI
            langOptions.forEach(opt => opt.setAttribute('aria-selected', 'false'));
            this.setAttribute('aria-selected', 'true');
            
            // Update toggle button
            const flagClass = selectedLang === 'pt-BR' ? 'lang-flag--br' : 
                             selectedLang === 'en' ? 'lang-flag--en' : 'lang-flag--es';
            const langCode = selectedLang === 'pt-BR' ? 'PT' : 
                            selectedLang === 'en' ? 'EN' : 'ES';
            
            langToggle.querySelector('.lang-flag').className = `lang-flag ${flagClass}`;
            langToggle.querySelector('.lang-code').textContent = langCode;
            
            // Close menu
            langToggle.setAttribute('aria-expanded', 'false');
            langMenu.classList.remove('active');
            
            // Save preference when user chooses (Sistema Híbrido)
            localStorage.setItem('preferredLanguage', selectedLang);
        });
    });

    // Load saved language preference
    const savedLang = localStorage.getItem('preferredLanguage') || 'pt-BR';
    const savedOption = document.querySelector(`[data-lang="${savedLang}"]`);
    if (savedOption) {
        savedOption.click();
    }
}

function changeLanguage(lang) {
    if (!translations || !translations[lang]) return;
    
    // Update all elements with data-i18n attributes
    document.querySelectorAll('[data-i18n]').forEach(element => {
        const key = element.getAttribute('data-i18n');
        const translation = translations[lang][key];
        
        if (translation) {
            // Handle HTML content (for elements that might contain <em> tags)
            if (translation.includes('<em>') || translation.includes('</em>')) {
                element.innerHTML = translation;
            } else {
                element.textContent = translation;
            }
        }
    });
    
    // Update document language
    document.documentElement.lang = lang;
}
